(this["webpackJsonpcrud-redux-1"]=this["webpackJsonpcrud-redux-1"]||[]).push([[0],{38:function(e,t,r){e.exports=r(66)},43:function(e,t,r){},66:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(15),c=r.n(o),l=(r(43),r(2)),u=r(10),i=r(34),s=r(37),O=r(17);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(r,!0).forEach((function(t){Object(O.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p={productos:[],error:null,loading:!1,producto:{}};function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(r,!0).forEach((function(t){Object(O.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f={error:null},b=Object(u.c)({productos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AGREGAR_PRODUCTO":return d({},e,{error:null});case"AGREGAR_PRODUCTO_EXITO":return d({},e,{error:null,productos:[].concat(Object(s.a)(e.productos),[t.payload])});case"AGREGAR_PRODUCTO_ERROR":return d({},e,{error:!0});case"COMENZAR_DESCARGA_PRODUCTOS":return d({},e,{loading:!0,producto:{}});case"DESCARGA_PRODUCTOS_EXITOSA":return d({},e,{productos:t.payload,loading:!1,error:!1,producto:{}});case"DESCARGA_PRODUCTOS_ERROR":return d({},e,{productos:[],error:!0,loading:!1,producto:{}});case"OBTENER_PRODUCTO_ELIMINAR":return d({},e,{error:null});case"PRODUCTO_ELIMINADO_EXITO":return d({},e,{error:null,productos:e.productos.filter((function(e){return e.id!==t.payload}))});case"PRODUCTO_ELIMINADO_ERROR":return d({},e,{error:!0});case"OBTENER_PRODUCTO_EDITAR":return d({},e,{error:null});case"PRODUCTO_EDITAR_EXITO":return d({},e,{error:null,producto:t.payload});case"PRODUCTO_EDITAR_ERROR":return d({},e,{error:!0});case"COMENZAR_EDICION_PRODUCTO":return d({},e,{error:null});case"PRODUCTO_EDITADO_EXITO":return d({},e,{error:null,productos:e.productos.map((function(e){return e.id===t.payload.id?e=t.payload:e}))});case"PRODUCTO_EDITADO_ERROR":return d({},e,{error:!0});default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"VALIDAR_FORMULARIO":case"VALIDAR_FORMULARIO_EXITO":return R({},e,{error:null});case"VALIDAR_FORMULARIO_ERROR":return R({},e,{error:!0});default:return e}}}),_=[i.a],y=Object(u.e)(b,{},Object(u.d)(u.a.apply(void 0,_),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),D=r(12),A=r(11),v=function(){return a.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary justify-content-between"},a.a.createElement("div",{className:"container"},a.a.createElement("h1",null,a.a.createElement(D.b,{to:"/",className:"text-light"},"CRUD - React,  Redux Hooks, REST API y Axios")),a.a.createElement(D.b,{to:"/productos/nuevo",className:"btn btn-danger nuevo-post d-block d-md-inline-block"},"Agregar Producto +")))},g=r(22),T=r(36),h=r.n(T).a.create({baseURL:"https://my-json-server.typicode.com/beatrizAdalab/productos"}),I=r(13),N=r.n(I);var P=function(){return{type:"AGREGAR_PRODUCTO"}},C=function(e){return{type:"AGREGAR_PRODUCTO_EXITO",payload:e}},j=function(e){return{type:"AGREGAR_PRODUCTO_ERROR"}};var U=function(){return{type:"COMENZAR_DESCARGA_PRODUCTOS"}},w=function(e){return{type:"DESCARGA_PRODUCTOS_EXITOSA",payload:e}},L=function(){return{type:"DESCARGA_PRODUCTOS_ERROR"}};var S=function(){return{type:"OBTENER_PRODUCTO_ELIMINAR"}},x=function(e){return{type:"PRODUCTO_ELIMINADO_EXITO",payload:e}},G=function(){return{type:"PRODUCTO_ELIMINADO_ERROR"}};var M=function(){return{type:"OBTENER_PRODUCTO_EDITAR"}},X=function(e){return{type:"PRODUCTO_EDITAR_EXITO",payload:e}},k=function(){return{type:"PRODUCTO_EDITAR_ERROR"}};var V=function(){return{type:"COMENZAR_EDICION_PRODUCTO"}},B=function(e){return{type:"PRODUCTO_EDITADO_EXITO",payload:e}},F=function(){return{type:"PRODUCTO_EDITADO_ERROR"}};function Z(){return function(e){e(H())}}var H=function(){return{type:"VALIDAR_FORMULARIO"}},z=function(e){var t=e.history,r=Object(n.useState)(""),o=Object(g.a)(r,2),c=o[0],u=o[1],i=Object(n.useState)(""),s=Object(g.a)(i,2),O=s[0],m=s[1],d=Object(l.b)(),p=function(e){return d(function(e){return function(t){t(P()),h.post("/libros",e).then((function(r){t(C(e))})).catch((function(e){t(j())}))}}(e))},E=Object(l.c)((function(e){return e.error.error}));return a.a.createElement("div",{className:"row justify-content-center mt-5"},a.a.createElement("div",{className:"col-md-8"},a.a.createElement("div",{className:"card"},a.a.createElement("div",{className:"card-body"},a.a.createElement("h2",{className:"text-center mb-4 font-weight-bold "},"Agregar Nuevo Libro"),a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),d(Z()),""!==c.trim()&&""!==O.trim()?(d({type:"VALIDAR_FORMULARIO_EXITO"}),p({nombre:c,precio:O}),t.push("/")):d({type:"VALIDAR_FORMULARIO_ERROR"})}},a.a.createElement("div",{className:"form-group"},a.a.createElement("label",null,"Nombre Libro"),a.a.createElement("input",{type:"text",className:"form-control",placeholder:"Nombre Libro",value:c,onChange:function(e){return u(e.target.value)}})),a.a.createElement("div",{className:"form-group"},a.a.createElement("label",null,"Precio Libro"),a.a.createElement("input",{type:"text",className:"form-control",placeholder:"Precio Libro",value:O,onChange:function(e){return m(e.target.value)}})),a.a.createElement("button",{type:"submit",className:"btn btn-primary font-weight-bold text-uppercase d-block w-100"},"Agregar")),E?a.a.createElement("div",{className:"font-weight-bold alert alert-danger text-center mt-4"},"Todos los campos son obligatorios"):null))))},J=function(e){var t=e.producto,r=Object(l.b)(),n=function(e){N.a.fire({title:"\xbfEst\xe1s seguro?",text:"Un producto eliminado no se puede recuperar",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"SI, Eliminar!",cancelButtonText:"Cancelar"}).then((function(e){e.value&&N.a.fire("Eliminado","El producto se elimin\xf3 correctamente","success")})),console.log(e),r(function(e){return function(t){t(S()),h.delete("/libros/".concat(e)).then((function(r){t(x(e))})).catch((function(e){t(G())}))}}(e))};return a.a.createElement("tr",null,a.a.createElement("td",null,t.nombre),a.a.createElement("td",null," ",a.a.createElement("span",{className:"font-weight-bold"}," ",t.precio," \u20ac")," "),a.a.createElement("td",{className:"acciones"},a.a.createElement(D.b,{to:"/productos/editar/".concat(t.id),className:"btn btn-primary mr-2"},"Editar"),a.a.createElement("button",{className:"btn btn-danger",onClick:function(){return n(t.id)}},"Eliminar")))},W=function(){var e=Object(l.b)();Object(n.useEffect)((function(){e((function(e){e(U()),h.get("/libros").then((function(t){e(w(t.data))})).catch((function(t){e(L())}))}))}),[]);var t=Object(l.c)((function(e){return e.productos.loading})),r=Object(l.c)((function(e){return e.productos.error})),o=Object(l.c)((function(e){return e.productos.productos}));return a.a.createElement(a.a.Fragment,null,r?a.a.createElement("div",{className:"font-weight-bold alert alert-danger text-center mt-4"},"Hubo un error..."):null,a.a.createElement("h2",{className:"text-center my-5"},"Listado de Productos"),a.a.createElement("table",{className:"table table-striped"},a.a.createElement("thead",{className:"bg-primary table-dark"},a.a.createElement("tr",null,a.a.createElement("th",{scope:"col"},"Nombre"),a.a.createElement("th",{scope:"col"},"Precio"),a.a.createElement("th",{scope:"col"},"Acciones"))),a.a.createElement("tbody",null,o.map((function(e){return a.a.createElement(J,{key:e.id,producto:e})})))),t?"Cargando...":null)},$=function(e){var t=e.history,r=e.match,o=Object(n.useRef)(""),c=Object(n.useRef)(""),u=Object(l.b)(),i=function(e){return u(function(e){return function(t){t(V()),h.put("/libros/".concat(e.id),e).then((function(e){t(B(e.data)),N.a.fire("Almacenado","El producto se actualiz\xf3 correctamente","success")})).catch((function(e){t(F())}))}}(e))},s=r.params.id;Object(n.useEffect)((function(){u(function(e){return function(t){t(M()),h.get("/libros/".concat(e)).then((function(e){console.log(e.data),t(X(e.data))})).catch((function(e){console.log(e),t(k())}))}}(s))}),[u,s]);var O=Object(l.c)((function(e){return e.productos.producto})),m=Object(l.c)((function(e){return e.productos.error}));if(!O)return"Cargando...";return a.a.createElement(n.Fragment,null,m?a.a.createElement("div",{className:"font-weight-bold alert alert-danger text-center mt-4"},"Hubo un error, intenta de nuevo"):a.a.createElement("div",{className:"row justify-content-center mt-5"},a.a.createElement("div",{className:"col-md-8"},a.a.createElement("div",{className:"card"},a.a.createElement("div",{className:"card-body"},a.a.createElement("h2",{className:"text-center"},"Editar Producto"),a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),u(Z()),""!==o.current.value.trim()&&""!==c.current.value.trim()?(u({type:"VALIDAR_FORMULARIO_EXITO"}),i({id:s,nombre:o.current.value,precio:c.current.value}),t.push("/")):u({type:"VALIDAR_FORMULARIO_ERROR"})}},a.a.createElement("div",{className:"form-group"},a.a.createElement("label",null,"Titulo"),a.a.createElement("input",{type:"text",className:"form-control",placeholder:"Titulo",defaultValue:O.nombre,ref:o})),a.a.createElement("div",{className:"form-group"},a.a.createElement("label",null,"Precio del Producto"),a.a.createElement("input",{type:"text",className:"form-control",placeholder:"Precio",defaultValue:O.precio,ref:c})),a.a.createElement("button",{type:"submit",className:"btn btn-primary font-weight-bold text-uppercase d-block w-100"},"Guardar Cambios")))))))};var q=function(){return a.a.createElement(D.a,null,a.a.createElement(l.a,{store:y},a.a.createElement(v,null),a.a.createElement("div",{className:"container"},a.a.createElement(A.c,null,a.a.createElement(A.a,{exact:!0,path:"/",component:W}),a.a.createElement(A.a,{exact:!0,path:"/productos/nuevo",component:z}),a.a.createElement(A.a,{exact:!0,path:"/productos/editar/:id",component:$})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[38,1,2]]]);
//# sourceMappingURL=main.52b1a2b6.chunk.js.map